PRINT 'Creacion de Nuevas Estructuras'
IF NOT EXISTS(SELECT NAME FROM sysobjects WHERE NAME LIKE 'PronosticoClima')
BEGIN
	CREATE TABLE dbo.PronosticoClima(
		Cod_Div	INT IDENTITY(1,1) NOT NULL,
		Latitud VARCHAR(20) NOT NULL DEFAULT '',
		Longitud VARCHAR(20) NOT NULL DEFAULT '',
		Región VARCHAR(100) NOT NULL DEFAULT '',
		Departamento VARCHAR(100) NOT NULL DEFAULT '',
		Municipio VARCHAR(100) NOT NULL DEFAULT '',
		Fecha SMALLDATETIME NOT NULL DEFAULT '',
		Temperatura NUMERIC(10,2) NOT NULL DEFAULT 0,		
		Presion NUMERIC(10,2) NOT NULL DEFAULT 0,				
		Precipitacion NUMERIC(10,2) NOT NULL DEFAULT 0,
		ProbabilidadTormenta NUMERIC(10,2) NOT NULL DEFAULT 0,
		Humedad NUMERIC(10,2) NOT NULL DEFAULT 0,
		Pronostico VARCHAR(100) NOT NULL DEFAULT '',
		UsuarioModifica VARCHAR(20) NOT NULL DEFAULT '', 
		ProgramaModifica VARCHAR(20) NOT NULL DEFAULT '',
		FechaModifica SMALLDATETIME,
		EquipoModifica VARCHAR(20) NOT NULL DEFAULT '')
	ALTER TABLE dbo.PronosticoClima ADD CONSTRAINT
		PK_PronosticoClima PRIMARY KEY CLUSTERED (Cod_Div)
END 
GO
IF NOT EXISTS(SELECT * FROM sysobjects WHERE NAME LIKE 'Usuario')
BEGIN
	CREATE TABLE dbo.Usuario(
		IdUsuario VARCHAR(20) NOT NULL DEFAULT '',
		Nombre VARCHAR(50) NOT NULL DEFAULT '',
		Apellido VARCHAR(50) NOT NULL DEFAULT '',
		Email VARCHAR(100) NOT NULL DEFAULT '',
		Password VARCHAR(20) NOT NULL DEFAULT '',
		UsuarioModifica VARCHAR(20) NOT NULL DEFAULT '', 
		ProgramaModifica VARCHAR(20) NOT NULL DEFAULT '',
		FechaModifica SMALLDATETIME,
		EquipoModifica VARCHAR(20) NOT NULL DEFAULT '')
	ALTER TABLE dbo.Usuario ADD CONSTRAINT
		PK_Usuario PRIMARY KEY CLUSTERED (Id)
END
GO
IF NOT EXISTS (SELECT * FROM Usuario)
BEGIN
	INSERT INTO Usuario (IdUsuario,Nombre,Apellido,Email,Password,UsuarioModifica,ProgramaModifica,FechaModifica,EquipoModifica)
	VALUES('ADMIN','ADMINISTRADOR','SISTEMA','ADMIN@ADMIN.COM','123456','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR')
END
GO
IF NOT EXISTS (SELECT * FROM PronosticoClima)
BEGIN
	INSERT INTO PronosticoClima(Latitud,Longitud,Región,Departamento,Municipio,Fecha,Temperatura,Presion,Precipitacion,ProbabilidadTormenta,Humedad,Pronostico,UsuarioModifica,ProgramaModifica,FechaModifica,EquipoModifica)
	VALUES('5789301','-7542874','AND','ANTIOQUIA','MEDELLIN','22/04/2021 13:00:00',240,10117,0,0,661,'Parcialmente Nublado','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR'),
		  ('5789301','-7542874','AND','NORTE DE SANTANDER','ÁBREGO','22/04/2021 14:00:00',224,10106,9,0,696,'Nublado - Lluvia','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR'),
		  ('5789301','-7542874','AND','META','ACANDÍ','22/04/2021 15:00:00',227,10099,15,0,788,'Nublado - Lluvia','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR'),
		  ('5789301','-7542874','AND','HUILA','NEIVA','22/04/2021 16:00:00',214,10101,11,0,871,'Nublado - Lluvia','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR'),
		  ('1171139532','-7518491152','CARIBE','ATLANTICO','BARRANQUILLA','22/04/2021 17:00:00',208,10107,3,0,797,'Nublado - Llovizna','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR'),
		  ('1171139532','-7518491152','CARIBE','MAGDALENA','SANTA MARTA','22/04/2021 18:00:00',201,10119,3,0,871,'Nublado - Llovizna','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR'),
		  ('1171139532','-7518491152','CARIBE','CESAR','VALLEDUPAR','22/04/2021 19:00:00',189,10136,3,0,975,'Nublado - Llovizna','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR'),
		  ('1171139532','-7518491152','CARIBE','BOLIVAR','CARTAGENA','22/04/2021 20:00:00',184,10145,0,0,973,'Nublado','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR'),
		  ('5789301','-7542874','AND','CHOCO','QUIBDO','22/04/2021 21:00:00',181,10155,0,0,970,'Nublado','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR'),
		  ('4432809','-75195368','AND','TOLIMA','IBAGUE','22/04/2021 22:00:00',178,10161,0,0,969,'Nublado','SYSADMIN','MANUAL',GETDATE(),'SERVIDOR')
END
GO
